# サブタスク機能の検討結果

## 検討日
2026-01-18

## 概要
各目標に対して「具体策」（サブタスク）を記入できる機能の追加を検討した。

## 結論
**機能追加を見送り**

## 理由
- URL共有機能で約950文字を使用しており、SNS利用規約上の懸念があった
- サブタスクを追加するとさらにURL長が増加する
- URL共有機能自体を削除することで対応した

## 対応内容（2026-01-18実施）

### URL共有機能の削除
URL共有機能に関する懸念（長大なURLをSNSで共有することの利用規約上のリスク）から、URL共有機能を削除した。

**削除したファイル:**
- `src/components/SharePanel/` (ディレクトリごと)
- `src/utils/shareUtils.ts`
- `src/utils/shareUtils.test.ts`

**削除した依存パッケージ:**
- `pako` (gzip圧縮)
- `qrcode.react` (QRコード生成)
- `@types/pako`

### 代替手段
- **画像保存**: ビンゴカードを画像としてエクスポートして共有
- **Markdownインポート/エクスポート**: 目標データの保存・復元

---

## 検討した機能要件（参考）

### 機能概要
- 各目標に1〜3個のサブタスク（具体策）を設定
- 目標達成の計画段階で使用
- プレイ中の確認方法:
  - ホバー/長押しでツールチップ表示
  - 折りたたみ式サイドパネルで一覧表示

### モードフロー案
```
input（目標入力）→ plan（計画モード・任意）→ play（プレイ）
```

### 検討したUI
- 計画モード: 各目標カードにサブタスク入力欄
- ツールチップ: PC=ホバー、モバイル=長押し
- サイドパネル: 全目標のサブタスクを一覧表示

---

## 将来的に再検討する場合

サブタスク機能を実装する場合、以下の選択肢がある：

### 1. サーバー保存方式
- 短いID（例: `?id=abc123`）のみURLに含める
- データはサーバー側（Cloudflare KV、Supabase等）に保存
- **課題**: インフラコストが発生

### 2. ローカルのみで運用
- サブタスクはlocalStorageのみで管理
- 共有は画像またはMarkdownで行う
- **メリット**: 現在のアーキテクチャで実装可能
